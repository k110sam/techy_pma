<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.shape.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.sam.projectmanager.techy_pma.controllers.DashboardController"
            stylesheets="@../css/dashboard.css"
            prefWidth="1100.0" prefHeight="700.0">

    <!-- ═══════════════════════════════════════════ -->
    <!-- SIDEBAR                                      -->
    <!-- ═══════════════════════════════════════════ -->
    <left>
        <VBox styleClass="sidebar" prefWidth="260.0" spacing="0">

            <!-- App Branding -->
            <VBox styleClass="sidebar-brand" spacing="4">
                <Label text="⬡ TECHY" styleClass="brand-logo"/>
                <Label text="PROJECT MANAGER" styleClass="brand-sub"/>
            </VBox>

            <!-- User Profile Block -->
            <VBox styleClass="user-profile-block" spacing="6">
                <HBox spacing="12" alignment="CENTER_LEFT">
                    <!-- Avatar Circle -->
                    <StackPane styleClass="avatar-circle">
                        <Label fx:id="avatarLabel" text="J" styleClass="avatar-letter"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label fx:id="sidebarUsername" text="john_doe" styleClass="profile-name"/>
                        <Label fx:id="sidebarEmail" text="john@email.com" styleClass="profile-email"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Divider -->
            <Separator styleClass="sidebar-divider"/>

            <!-- Navigation -->
            <VBox styleClass="nav-section" spacing="4" VBox.vgrow="ALWAYS">
                <Label text="NAVIGATION" styleClass="nav-section-label"/>

                <Button fx:id="navDashboard" text="  ⊞  Dashboard"
                        onAction="#handleNavDashboard"
                        styleClass="nav-button, nav-active"
                        maxWidth="Infinity"/>

                <Button fx:id="navMyProjects" text="  ◈  My Projects"
                        onAction="#handleNavMyProjects"
                        styleClass="nav-button"
                        maxWidth="Infinity"/>

                <Button fx:id="navBrowse" text="  ⊕  Browse Projects"
                        onAction="#handleNavBrowse"
                        styleClass="nav-button"
                        maxWidth="Infinity"/>

                <Button fx:id="navCreate" text="  ✦  Create Project"
                        onAction="#handleCreateProject"
                        styleClass="nav-button, nav-create"
                        maxWidth="Infinity"/>
            </VBox>

            <!-- Logout Button -->
            <VBox styleClass="sidebar-footer" spacing="8">
                <Separator styleClass="sidebar-divider"/>
                <Button text="  ⊗  Logout"
                        onAction="#handleLogout"
                        styleClass="nav-button, nav-logout"
                        maxWidth="Infinity"/>
            </VBox>

        </VBox>
    </left>

    <!-- ═══════════════════════════════════════════ -->
    <!-- MAIN CONTENT                                 -->
    <!-- ═══════════════════════════════════════════ -->
    <center>
        <VBox styleClass="main-content" spacing="0">

            <!-- Top Bar -->
            <HBox styleClass="topbar" alignment="CENTER_LEFT" spacing="16">
                <VBox spacing="2" HBox.hgrow="ALWAYS">
                    <Label fx:id="welcomeLabel" text="Good Morning, john!" styleClass="topbar-title"/>
                    <Label text="Here's what's happening with your projects today." styleClass="topbar-sub"/>
                </VBox>
                <Label fx:id="dateLabel" text="Feb 12, 2026" styleClass="topbar-date"/>
            </HBox>

            <!-- Scrollable Content -->
            <ScrollPane fitToWidth="true" styleClass="content-scroll" VBox.vgrow="ALWAYS">
                <VBox spacing="28" styleClass="content-inner">

                    <!-- ─── STATS ROW ─── -->
                    <HBox spacing="16">

                        <!-- Stat Card 1 -->
                        <VBox styleClass="stat-card, stat-blue" spacing="8" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label text="◈" styleClass="stat-icon"/>
                                <Label text="MY PROJECTS" styleClass="stat-label"/>
                            </HBox>
                            <Label fx:id="myProjectsCount" text="0" styleClass="stat-number"/>
                            <Label text="Projects you've joined" styleClass="stat-desc"/>
                        </VBox>

                        <!-- Stat Card 2 -->
                        <VBox styleClass="stat-card, stat-green" spacing="8" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label text="✦" styleClass="stat-icon"/>
                                <Label text="CREATED" styleClass="stat-label"/>
                            </HBox>
                            <Label fx:id="createdCount" text="0" styleClass="stat-number"/>
                            <Label text="Projects you started" styleClass="stat-desc"/>
                        </VBox>

                        <!-- Stat Card 3 -->
                        <VBox styleClass="stat-card, stat-orange" spacing="8" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label text="⊕" styleClass="stat-icon"/>
                                <Label text="AVAILABLE" styleClass="stat-label"/>
                            </HBox>
                            <Label fx:id="availableCount" text="0" styleClass="stat-number"/>
                            <Label text="Projects to browse" styleClass="stat-desc"/>
                        </VBox>

                    </HBox>

                    <!-- ─── QUICK ACTIONS ─── -->
                    <VBox spacing="12">
                        <Label text="QUICK ACTIONS" styleClass="section-title"/>
                        <HBox spacing="12">

                            <Button text="✦  Create New Project"
                                    onAction="#handleCreateProject"
                                    styleClass="action-button, action-primary"
                                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>

                            <Button text="⊕  Browse All Projects"
                                    onAction="#handleNavBrowse"
                                    styleClass="action-button, action-secondary"
                                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>

                            <Button text="◈  View My Projects"
                                    onAction="#handleNavMyProjects"
                                    styleClass="action-button, action-tertiary"
                                    HBox.hgrow="ALWAYS" maxWidth="Infinity"/>

                        </HBox>
                    </VBox>

                    <!-- ─── MY PROJECTS ─── -->
                    <VBox spacing="14">
                        <HBox alignment="CENTER_LEFT">
                            <Label text="MY CURRENT PROJECTS " styleClass="section-title" HBox.hgrow="ALWAYS"/>
                            <Label fx:id="projectCountLabel" text="0 projects" styleClass="section-count"/>
                        </HBox>

                        <!-- Empty State (shown when no projects) -->
                        <VBox fx:id="emptyState" styleClass="empty-state" spacing="10" alignment="CENTER">
                            <Label text="⬡" styleClass="empty-icon"/>
                            <Label text="No projects yet" styleClass="empty-title"/>
                            <Label text="Create a new project or browse available ones to get started."
                                   styleClass="empty-desc" wrapText="true" textAlignment="CENTER"/>
                            <Button text="✦  Create Your First Project"
                                    onAction="#handleCreateProject"
                                    styleClass="action-button, action-primary"/>
                        </VBox>

                        <!-- Projects Container (populated dynamically) -->
                        <VBox fx:id="projectsContainer" spacing="12"/>

                    </VBox>

                </VBox>
            </ScrollPane>

        </VBox>
    </center>

</BorderPane>